import{o as d}from"./imaios-global-D0pGfse-.js";import"./sha256-C6hLnjrm.js";import"./_commonjsHelpers-Chg3vePA.js";function i(c,a){let n=null;return(...e)=>{const t=()=>c(...e);clearTimeout(n),n=setTimeout(t,a)}}function h(c,a,n,e){a.innerHTML="",n.forEach(t=>{const o=document.createElement("button");o.classList.add("dropdown-item","search-case__suggestion-item");const r=t.indexOf(c);r!==-1?o.innerHTML=`${t.slice(0,r)}<span class="search-case__highlight">${t.slice(r,r+c.length)}</span>${t.slice(r+c.length)}`:o.innerHTML=t,o.addEventListener("click",l=>{e(l,t),s(a,!1)}),a.appendChild(o)})}function s(c,a){c.classList.toggle("d-block",a)}function f(c,a){const n=c.id.replace("search-field__",""),e=document.getElementById(`search-suggestion__${n}`);if(c.value===""){s(e,!1);return}const t=imaios.get("imaios-search-autocomplete").replace("__query__",c.value).replace("__locale__",c.getAttribute("data-lang"));imaios.fetch(t,{method:"GET"}).then(o=>{if(o.ok)return o.json();throw o}).then(o=>{if(o.length===0){s(e,!1);return}h(c.value,e,o,(r,l)=>{c.value=l}),s(e,!0)})}d(function(){const c=i(f,150),a=Array.from(document.querySelectorAll(".search-case")),n=Array.from(document.querySelectorAll(".search-case__suggestion"));document.querySelectorAll("[data-id='search-field']").forEach(e=>{e.addEventListener("input",t=>c(e,t)),e.addEventListener("keydown",t=>{t.key==="Escape"&&n.forEach(o=>s(o,!1))})}),document.body.addEventListener("click",e=>{const t=e.path||e.composedPath&&e.composedPath();(t?t.indexOf(a)<0:!a.includes(e.target))&&n.forEach(r=>s(r,!1))})});
//# sourceMappingURL=search-js-CnWQvHvi.js.map
