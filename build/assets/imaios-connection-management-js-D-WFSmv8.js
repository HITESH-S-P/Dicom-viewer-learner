var a=(e,t,o)=>new Promise((r,s)=>{var w=i=>{try{c(o.next(i))}catch(d){s(d)}},g=i=>{try{c(o.throw(i))}catch(d){s(d)}},c=i=>i.done?r(i.value):Promise.resolve(i.value).then(w,g);c((o=o.apply(e,t)).next())});import{L as n}from"./login-management-service-DTUXGn6C.js";import{N as p}from"./notifications.constant-CpYlRevd.js";import{s as u,S as f,P as y}from"./temp-storage.service-BD8v5Cjg.js";import{g as S}from"./imaios-global-D0pGfse-.js";import"./sha256-C6hLnjrm.js";import"./_commonjsHelpers-Chg3vePA.js";const m="imaios-connection-management";function l(){imaios.pubsub.publish(p.LOGOUT)}function A(){return a(this,null,function*(){const e=document.querySelectorAll('[data-header="b2b-admin-entry"]');if(e){yield n.awaitConnection();const t=u.get(f.IMAIOS_USER_INFORMATION);t!=null&&t.isB2BAdministrator&&Array.from(e).forEach(o=>{o.classList.remove("d-none")})}})}function v(){return a(this,null,function*(){const e=document.getElementById("header-cases-entry");if(e){yield n.awaitConnection();const t=u.get(f.IMAIOS_USER_INFORMATION);t!=null&&t.id&&e.classList.remove("d-none")}})}function E(e){return a(this,null,function*(){const t=document.querySelector("#msk-button-subscribe");t&&(yield e.awaitConnection(),e.haveAccessToProduct(y.MSK)&&t.setAttribute("style","display:none"))})}function I(e){return a(this,null,function*(){yield e.awaitConnection(),e.deleteSubscriptionsTags()})}function h(){if(S(m)!==!0){if(imaios.store(m,!0),imaios.store("login-manager",n),A(),v(),E(n),I(n),Array.from(document.querySelectorAll(".imaios-logout")).forEach(e=>{e.addEventListener("click",l)}),window.location.search.length>0&&window.location.href.includes("previous_imaios_action")){const e=window.location.href.split("?");if(e.length===2){const t=["previous_imaios_action=logout","previous_imaios_action=login"],o=e[1];t.forEach(r=>{if(o.includes(r)){l();const s=new URLSearchParams(o.replace(r,""));history.pushState({},"",window.location.pathname+(s.toString().length>0?"?"+s.toString():""))}})}}n.loadLogin()}}window.addEventListener("pageshow",e=>{e.persisted&&h()});window.addEventListener("pagehide",e=>{imaios.store(m,!1)});h();
//# sourceMappingURL=imaios-connection-management-js-D-WFSmv8.js.map
